{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "policy_rate": { "$ref": "#/definitions/metricDaily" },
    "inflation": { "$ref": "#/definitions/metricDaily" },
    "unemployment": { "$ref": "#/definitions/metricDaily" },
    "pmi": { "$ref": "#/definitions/metricDaily" },
    "equity_index": { "$ref": "#/definitions/metricDaily" },
    "fx_rates": {
      "type": "array",
      "items": { "$ref": "#/definitions/fxRate" }
    },
    "currency_index": { "$ref": "#/definitions/metricDaily" },
    "bond_yield_10y": { "$ref": "#/definitions/metricDaily" }
  },
  "required": ["policy_rate", "inflation", "unemployment", "pmi", "equity_index", "fx_rates", "currency_index", "bond_yield_10y"],
  "definitions": {
    "metricDaily": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "sources": { "type": "array", "items": { "$ref": "#/definitions/metricSource" } },
        "unit": { "$ref": "#/definitions/metricUnit" },
        "status": { "$ref": "#/definitions/metricStatus" }
      },
      "required": ["sources", "unit", "status"]
    },
    "metricSource": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "value": { "type": ["number", "null"] },
        "date": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$" },
        "unit": { "$ref": "#/definitions/metricUnit" },
        "source_url": { "type": "string", "minLength": 1 },
        "source_name": { "type": "string", "minLength": 1 }
      },
      "required": ["value", "date", "unit", "source_url", "source_name"]
    },
    "fxRate": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "pair": { "type": "string", "pattern": "^[A-Z]{3}/[A-Z]{3}$" },
        "value": { "type": "number" },
        "as_of": { "type": "string", "format": "date-time" },
        "source_url": { "type": "string", "minLength": 1 },
        "source_name": { "type": "string", "minLength": 1 }
      },
      "required": ["pair", "value", "as_of", "source_url", "source_name"]
    },
    "metricUnit": { "type": "string", "enum": ["PERCENT", "INDEX", "POINTS", "LEVEL", "RATE_PCT"] },
    "metricStatus": { "type": "string", "enum": ["EXCELLENT", "GOOD", "MODERATE", "WARNING", "DANGER", "CRITICAL", "UNKNOWN"] }
  }
}
